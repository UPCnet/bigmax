/*
* MAX UI v.3.5.3
*/
/*
* sockjs-0.3.min.js
*/
SockJS=function(){var a=document,b=window,c={},d=function(){};d.prototype.addEventListener=function(a,b){this._listeners||(this._listeners={}),a in this._listeners||(this._listeners[a]=[]);var d=this._listeners[a];c.arrIndexOf(d,b)===-1&&d.push(b);return},d.prototype.removeEventListener=function(a,b){if(!(this._listeners&&a in this._listeners))return;var d=this._listeners[a],e=c.arrIndexOf(d,b);if(e!==-1){d.length>1?this._listeners[a]=d.slice(0,e).concat(d.slice(e+1)):delete this._listeners[a];return}return},d.prototype.dispatchEvent=function(a){var b=a.type,c=Array.prototype.slice.call(arguments,0);this["on"+b]&&this["on"+b].apply(this,c);if(this._listeners&&b in this._listeners)for(var d=0;d<this._listeners[b].length;d++)this._listeners[b][d].apply(this,c)};var e=function(a,b){this.type=a;if(typeof b!="undefined")for(var c in b){if(!b.hasOwnProperty(c))continue;this[c]=b[c]}};e.prototype.toString=function(){var a=[];for(var b in this){if(!this.hasOwnProperty(b))continue;var c=this[b];typeof c=="function"&&(c="[function]"),a.push(b+"="+c)}return"SimpleEvent("+a.join(", ")+")"};var f=function(a){var b=this;b._events=a||[],b._listeners={}};f.prototype.emit=function(a){var b=this;b._verifyType(a);if(b._nuked)return;var c=Array.prototype.slice.call(arguments,1);b["on"+a]&&b["on"+a].apply(b,c);if(a in b._listeners)for(var d=0;d<b._listeners[a].length;d++)b._listeners[a][d].apply(b,c)},f.prototype.on=function(a,b){var c=this;c._verifyType(a);if(c._nuked)return;a in c._listeners||(c._listeners[a]=[]),c._listeners[a].push(b)},f.prototype._verifyType=function(a){var b=this;c.arrIndexOf(b._events,a)===-1&&c.log("Event "+JSON.stringify(a)+" not listed "+JSON.stringify(b._events)+" in "+b)},f.prototype.nuke=function(){var a=this;a._nuked=!0;for(var b=0;b<a._events.length;b++)delete a[a._events[b]];a._listeners={}};var g="abcdefghijklmnopqrstuvwxyz0123456789_";c.random_string=function(a,b){b=b||g.length;var c,d=[];for(c=0;c<a;c++)d.push(g.substr(Math.floor(Math.random()*b),1));return d.join("")},c.random_number=function(a){return Math.floor(Math.random()*a)},c.random_number_string=function(a){var b=(""+(a-1)).length,d=Array(b+1).join("0");return(d+c.random_number(a)).slice(-b)},c.getOrigin=function(a){a+="/";var b=a.split("/").slice(0,3);return b.join("/")},c.isSameOriginUrl=function(a,c){return c||(c=b.location.href),a.split("/").slice(0,3).join("/")===c.split("/").slice(0,3).join("/")},c.getParentDomain=function(a){if(/^[0-9.]*$/.test(a))return a;if(/^\[/.test(a))return a;if(!/[.]/.test(a))return a;var b=a.split(".").slice(1);return b.join(".")},c.objectExtend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a};var h="_jp";c.polluteGlobalNamespace=function(){h in b||(b[h]={})},c.closeFrame=function(a,b){return"c"+JSON.stringify([a,b])},c.userSetCode=function(a){return a===1e3||a>=3e3&&a<=4999},c.countRTO=function(a){var b;return a>100?b=3*a:b=a+200,b},c.log=function(){b.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},c.bind=function(a,b){return a.bind?a.bind(b):function(){return a.apply(b,arguments)}},c.flatUrl=function(a){return a.indexOf("?")===-1&&a.indexOf("#")===-1},c.amendUrl=function(b){var d=a.location;if(!b)throw new Error("Wrong url for SockJS");if(!c.flatUrl(b))throw new Error("Only basic urls are supported in SockJS");return b.indexOf("//")===0&&(b=d.protocol+b),b.indexOf("/")===0&&(b=d.protocol+"//"+d.host+b),b=b.replace(/[/]+$/,""),b},c.arrIndexOf=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},c.arrSkip=function(a,b){var d=c.arrIndexOf(a,b);if(d===-1)return a.slice();var e=a.slice(0,d);return e.concat(a.slice(d+1))},c.isArray=Array.isArray||function(a){return{}.toString.call(a).indexOf("Array")>=0},c.delay=function(a,b){return typeof a=="function"&&(b=a,a=0),setTimeout(b,a)};var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j={"\0":"\\u0000","\x01":"\\u0001","\x02":"\\u0002","\x03":"\\u0003","\x04":"\\u0004","\x05":"\\u0005","\x06":"\\u0006","\x07":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\x0b":"\\u000b","\f":"\\f","\r":"\\r","\x0e":"\\u000e","\x0f":"\\u000f","\x10":"\\u0010","\x11":"\\u0011","\x12":"\\u0012","\x13":"\\u0013","\x14":"\\u0014","\x15":"\\u0015","\x16":"\\u0016","\x17":"\\u0017","\x18":"\\u0018","\x19":"\\u0019","\x1a":"\\u001a","\x1b":"\\u001b","\x1c":"\\u001c","\x1d":"\\u001d","\x1e":"\\u001e","\x1f":"\\u001f",'"':'\\"',"\\":"\\\\","\x7f":"\\u007f","\x80":"\\u0080","\x81":"\\u0081","\x82":"\\u0082","\x83":"\\u0083","\x84":"\\u0084","\x85":"\\u0085","\x86":"\\u0086","\x87":"\\u0087","\x88":"\\u0088","\x89":"\\u0089","\x8a":"\\u008a","\x8b":"\\u008b","\x8c":"\\u008c","\x8d":"\\u008d","\x8e":"\\u008e","\x8f":"\\u008f","\x90":"\\u0090","\x91":"\\u0091","\x92":"\\u0092","\x93":"\\u0093","\x94":"\\u0094","\x95":"\\u0095","\x96":"\\u0096","\x97":"\\u0097","\x98":"\\u0098","\x99":"\\u0099","\x9a":"\\u009a","\x9b":"\\u009b","\x9c":"\\u009c","\x9d":"\\u009d","\x9e":"\\u009e","\x9f":"\\u009f","\xad":"\\u00ad","\u0600":"\\u0600","\u0601":"\\u0601","\u0602":"\\u0602","\u0603":"\\u0603","\u0604":"\\u0604","\u070f":"\\u070f","\u17b4":"\\u17b4","\u17b5":"\\u17b5","\u200c":"\\u200c","\u200d":"\\u200d","\u200e":"\\u200e","\u200f":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","\u202a":"\\u202a","\u202b":"\\u202b","\u202c":"\\u202c","\u202d":"\\u202d","\u202e":"\\u202e","\u202f":"\\u202f","\u2060":"\\u2060","\u2061":"\\u2061","\u2062":"\\u2062","\u2063":"\\u2063","\u2064":"\\u2064","\u2065":"\\u2065","\u2066":"\\u2066","\u2067":"\\u2067","\u2068":"\\u2068","\u2069":"\\u2069","\u206a":"\\u206a","\u206b":"\\u206b","\u206c":"\\u206c","\u206d":"\\u206d","\u206e":"\\u206e","\u206f":"\\u206f","\ufeff":"\\ufeff","\ufff0":"\\ufff0","\ufff1":"\\ufff1","\ufff2":"\\ufff2","\ufff3":"\\ufff3","\ufff4":"\\ufff4","\ufff5":"\\ufff5","\ufff6":"\\ufff6","\ufff7":"\\ufff7","\ufff8":"\\ufff8","\ufff9":"\\ufff9","\ufffa":"\\ufffa","\ufffb":"\\ufffb","\ufffc":"\\ufffc","\ufffd":"\\ufffd","\ufffe":"\\ufffe","\uffff":"\\uffff"},k=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,l,m=JSON&&JSON.stringify||function(a){return i.lastIndex=0,i.test(a)&&(a=a.replace(i,function(a){return j[a]})),'"'+a+'"'},n=function(a){var b,c={},d=[];for(b=0;b<65536;b++)d.push(String.fromCharCode(b));return a.lastIndex=0,d.join("").replace(a,function(a){return c[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),""}),a.lastIndex=0,c};c.quote=function(a){var b=m(a);return k.lastIndex=0,k.test(b)?(l||(l=n(k)),b.replace(k,function(a){return l[a]})):b};var o=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];c.probeProtocols=function(){var a={};for(var b=0;b<o.length;b++){var c=o[b];a[c]=y[c]&&y[c].enabled()}return a},c.detectProtocols=function(a,b,c){var d={},e=[];b||(b=o);for(var f=0;f<b.length;f++){var g=b[f];d[g]=a[g]}var h=function(a){var b=a.shift();d[b]?e.push(b):a.length>0&&h(a)};return c.websocket!==!1&&h(["websocket"]),d["xhr-streaming"]&&!c.null_origin?e.push("xhr-streaming"):d["xdr-streaming"]&&!c.cookie_needed&&!c.null_origin?e.push("xdr-streaming"):h(["iframe-eventsource","iframe-htmlfile"]),d["xhr-polling"]&&!c.null_origin?e.push("xhr-polling"):d["xdr-polling"]&&!c.cookie_needed&&!c.null_origin?e.push("xdr-polling"):h(["iframe-xhr-polling","jsonp-polling"]),e};var p="_sockjs_global";c.createHook=function(){var a="a"+c.random_string(8);if(!(p in b)){var d={};b[p]=function(a){return a in d||(d[a]={id:a,del:function(){delete d[a]}}),d[a]}}return b[p](a)},c.attachMessage=function(a){c.attachEvent("message",a)},c.attachEvent=function(c,d){typeof b.addEventListener!="undefined"?b.addEventListener(c,d,!1):(a.attachEvent("on"+c,d),b.attachEvent("on"+c,d))},c.detachMessage=function(a){c.detachEvent("message",a)},c.detachEvent=function(c,d){typeof b.addEventListener!="undefined"?b.removeEventListener(c,d,!1):(a.detachEvent("on"+c,d),b.detachEvent("on"+c,d))};var q={},r=!1,s=function(){for(var a in q)q[a](),delete q[a]},t=function(){if(r)return;r=!0,s()};c.attachEvent("unload",t),c.unload_add=function(a){var b=c.random_string(8);return q[b]=a,r&&c.delay(s),b},c.unload_del=function(a){a in q&&delete q[a]},c.createIframe=function(b,d){var e=a.createElement("iframe"),f,g,h=function(){clearTimeout(f);try{e.onload=null}catch(a){}e.onerror=null},i=function(){e&&(h(),setTimeout(function(){e&&e.parentNode.removeChild(e),e=null},0),c.unload_del(g))},j=function(a){e&&(i(),d(a))},k=function(a,b){try{e&&e.contentWindow&&e.contentWindow.postMessage(a,b)}catch(c){}};return e.src=b,e.style.display="none",e.style.position="absolute",e.onerror=function(){j("onerror")},e.onload=function(){clearTimeout(f),f=setTimeout(function(){j("onload timeout")},2e3)},a.body.appendChild(e),f=setTimeout(function(){j("timeout")},15e3),g=c.unload_add(i),{post:k,cleanup:i,loaded:h}},c.createHtmlfile=function(a,d){var e=new ActiveXObject("htmlfile"),f,g,i,j=function(){clearTimeout(f)},k=function(){e&&(j(),c.unload_del(g),i.parentNode.removeChild(i),i=e=null,CollectGarbage())},l=function(a){e&&(k(),d(a))},m=function(a,b){try{i&&i.contentWindow&&i.contentWindow.postMessage(a,b)}catch(c){}};e.open(),e.write('<html><script>document.domain="'+document.domain+'";'+"</s"+"cript></html>"),e.close(),e.parentWindow[h]=b[h];var n=e.createElement("div");return e.body.appendChild(n),i=e.createElement("iframe"),n.appendChild(i),i.src=a,f=setTimeout(function(){l("timeout")},15e3),g=c.unload_add(k),{post:m,cleanup:k,loaded:j}};var u=function(){};u.prototype=new f(["chunk","finish"]),u.prototype._start=function(a,d,e,f){var g=this;try{g.xhr=new XMLHttpRequest}catch(h){}if(!g.xhr)try{g.xhr=new b.ActiveXObject("Microsoft.XMLHTTP")}catch(h){}if(b.ActiveXObject||b.XDomainRequest)d+=(d.indexOf("?")===-1?"?":"&")+"t="+ +(new Date);g.unload_ref=c.unload_add(function(){g._cleanup(!0)});try{g.xhr.open(a,d,!0)}catch(i){g.emit("finish",0,""),g._cleanup();return}if(!f||!f.no_credentials)g.xhr.withCredentials="true";if(f&&f.headers)for(var j in f.headers)g.xhr.setRequestHeader(j,f.headers[j]);g.xhr.onreadystatechange=function(){if(g.xhr){var a=g.xhr;switch(a.readyState){case 3:try{var b=a.status,c=a.responseText}catch(a){}b===1223&&(b=204),c&&c.length>0&&g.emit("chunk",b,c);break;case 4:var b=a.status;b===1223&&(b=204),g.emit("finish",b,a.responseText),g._cleanup(!1)}}},g.xhr.send(e)},u.prototype._cleanup=function(a){var b=this;if(!b.xhr)return;c.unload_del(b.unload_ref),b.xhr.onreadystatechange=function(){};if(a)try{b.xhr.abort()}catch(d){}b.unload_ref=b.xhr=null},u.prototype.close=function(){var a=this;a.nuke(),a._cleanup(!0)};var v=c.XHRCorsObject=function(){var a=this,b=arguments;c.delay(function(){a._start.apply(a,b)})};v.prototype=new u;var w=c.XHRLocalObject=function(a,b,d){var e=this;c.delay(function(){e._start(a,b,d,{no_credentials:!0})})};w.prototype=new u;var x=c.XDRObject=function(a,b,d){var e=this;c.delay(function(){e._start(a,b,d)})};x.prototype=new f(["chunk","finish"]),x.prototype._start=function(a,b,d){var e=this,f=new XDomainRequest;b+=(b.indexOf("?")===-1?"?":"&")+"t="+ +(new Date);var g=f.ontimeout=f.onerror=function(){e.emit("finish",0,""),e._cleanup(!1)};f.onprogress=function(){e.emit("chunk",200,f.responseText)},f.onload=function(){e.emit("finish",200,f.responseText),e._cleanup(!1)},e.xdr=f,e.unload_ref=c.unload_add(function(){e._cleanup(!0)});try{e.xdr.open(a,b),e.xdr.send(d)}catch(h){g()}},x.prototype._cleanup=function(a){var b=this;if(!b.xdr)return;c.unload_del(b.unload_ref),b.xdr.ontimeout=b.xdr.onerror=b.xdr.onprogress=b.xdr.onload=null;if(a)try{b.xdr.abort()}catch(d){}b.unload_ref=b.xdr=null},x.prototype.close=function(){var a=this;a.nuke(),a._cleanup(!0)},c.isXHRCorsCapable=function(){return b.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:b.XDomainRequest&&a.domain?2:L.enabled()?3:4};var y=function(a,d,e){if(this===b)return new y(a,d,e);var f=this,g;f._options={devel:!1,debug:!1,protocols_whitelist:[],info:undefined,rtt:undefined},e&&c.objectExtend(f._options,e),f._base_url=c.amendUrl(a),f._server=f._options.server||c.random_number_string(1e3),f._options.protocols_whitelist&&f._options.protocols_whitelist.length?g=f._options.protocols_whitelist:(typeof d=="string"&&d.length>0?g=[d]:c.isArray(d)?g=d:g=null,g&&f._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),f._protocols=[],f.protocol=null,f.readyState=y.CONNECTING,f._ir=S(f._base_url),f._ir.onfinish=function(a,b){f._ir=null,a?(f._options.info&&(a=c.objectExtend(a,f._options.info)),f._options.rtt&&(b=f._options.rtt),f._applyInfo(a,b,g),f._didClose()):f._didClose(1002,"Can't connect to server",!0)}};y.prototype=new d,y.version="0.3.4",y.CONNECTING=0,y.OPEN=1,y.CLOSING=2,y.CLOSED=3,y.prototype._debug=function(){this._options.debug&&c.log.apply(c,arguments)},y.prototype._dispatchOpen=function(){var a=this;a.readyState===y.CONNECTING?(a._transport_tref&&(clearTimeout(a._transport_tref),a._transport_tref=null),a.readyState=y.OPEN,a.dispatchEvent(new e("open"))):a._didClose(1006,"Server lost session")},y.prototype._dispatchMessage=function(a){var b=this;if(b.readyState!==y.OPEN)return;b.dispatchEvent(new e("message",{data:a}))},y.prototype._dispatchHeartbeat=function(a){var b=this;if(b.readyState!==y.OPEN)return;b.dispatchEvent(new e("heartbeat",{}))},y.prototype._didClose=function(a,b,d){var f=this;if(f.readyState!==y.CONNECTING&&f.readyState!==y.OPEN&&f.readyState!==y.CLOSING)throw new Error("INVALID_STATE_ERR");f._ir&&(f._ir.nuke(),f._ir=null),f._transport&&(f._transport.doCleanup(),f._transport=null);var g=new e("close",{code:a,reason:b,wasClean:c.userSetCode(a)});if(!c.userSetCode(a)&&f.readyState===y.CONNECTING&&!d){if(f._try_next_protocol(g))return;g=new e("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:g})}f.readyState=y.CLOSED,c.delay(function(){f.dispatchEvent(g)})},y.prototype._didMessage=function(a){var b=this,c=a.slice(0,1);switch(c){case"o":b._dispatchOpen();break;case"a":var d=JSON.parse(a.slice(1)||"[]");for(var e=0;e<d.length;e++)b._dispatchMessage(d[e]);break;case"m":var d=JSON.parse(a.slice(1)||"null");b._dispatchMessage(d);break;case"c":var d=JSON.parse(a.slice(1)||"[]");b._didClose(d[0],d[1]);break;case"h":b._dispatchHeartbeat()}},y.prototype._try_next_protocol=function(b){var d=this;d.protocol&&(d._debug("Closed transport:",d.protocol,""+b),d.protocol=null),d._transport_tref&&(clearTimeout(d._transport_tref),d._transport_tref=null);for(;;){var e=d.protocol=d._protocols.shift();if(!e)return!1;if(y[e]&&y[e].need_body===!0&&(!a.body||typeof a.readyState!="undefined"&&a.readyState!=="complete"))return d._protocols.unshift(e),d.protocol="waiting-for-load",c.attachEvent("load",function(){d._try_next_protocol()}),!0;if(!!y[e]&&!!y[e].enabled(d._options)){var f=y[e].roundTrips||1,g=(d._options.rto||0)*f||5e3;d._transport_tref=c.delay(g,function(){d.readyState===y.CONNECTING&&d._didClose(2007,"Transport timeouted")});var h=c.random_string(8),i=d._base_url+"/"+d._server+"/"+h;return d._debug("Opening transport:",e," url:"+i," RTO:"+d._options.rto),d._transport=new y[e](d,i,d._base_url),!0}d._debug("Skipping transport:",e)}},y.prototype.close=function(a,b){var d=this;if(a&&!c.userSetCode(a))throw new Error("INVALID_ACCESS_ERR");return d.readyState!==y.CONNECTING&&d.readyState!==y.OPEN?!1:(d.readyState=y.CLOSING,d._didClose(a||1e3,b||"Normal closure"),!0)},y.prototype.send=function(a){var b=this;if(b.readyState===y.CONNECTING)throw new Error("INVALID_STATE_ERR");return b.readyState===y.OPEN&&b._transport.doSend(c.quote(""+a)),!0},y.prototype._applyInfo=function(b,d,e){var f=this;f._options.info=b,f._options.rtt=d,f._options.rto=c.countRTO(d),f._options.info.null_origin=!a.domain;var g=c.probeProtocols();f._protocols=c.detectProtocols(g,e,b)};var z=y.websocket=function(a,d){var e=this,f=d+"/websocket";f.slice(0,5)==="https"?f="wss"+f.slice(5):f="ws"+f.slice(4),e.ri=a,e.url=f;var g=b.WebSocket||b.MozWebSocket;e.ws=new g(e.url),e.ws.onmessage=function(a){e.ri._didMessage(a.data)},e.unload_ref=c.unload_add(function(){e.ws.close()}),e.ws.onclose=function(){e.ri._didMessage(c.closeFrame(1006,"WebSocket connection broken"))}};z.prototype.doSend=function(a){this.ws.send("["+a+"]")},z.prototype.doCleanup=function(){var a=this,b=a.ws;b&&(b.onmessage=b.onclose=null,b.close(),c.unload_del(a.unload_ref),a.unload_ref=a.ri=a.ws=null)},z.enabled=function(){return!!b.WebSocket||!!b.MozWebSocket},z.roundTrips=2;var A=function(){};A.prototype.send_constructor=function(a){var b=this;b.send_buffer=[],b.sender=a},A.prototype.doSend=function(a){var b=this;b.send_buffer.push(a),b.send_stop||b.send_schedule()},A.prototype.send_schedule_wait=function(){var a=this,b;a.send_stop=function(){a.send_stop=null,clearTimeout(b)},b=c.delay(25,function(){a.send_stop=null,a.send_schedule()})},A.prototype.send_schedule=function(){var a=this;if(a.send_buffer.length>0){var b="["+a.send_buffer.join(",")+"]";a.send_stop=a.sender(a.trans_url,b,function(b,c){a.send_stop=null,b===!1?a.ri._didClose(1006,"Sending error "+c):a.send_schedule_wait()}),a.send_buffer=[]}},A.prototype.send_destructor=function(){var a=this;a._send_stop&&a._send_stop(),a._send_stop=null};var B=function(b,d,e){var f=this;if(!("_send_form"in f)){var g=f._send_form=a.createElement("form"),h=f._send_area=a.createElement("textarea");h.name="d",g.style.display="none",g.style.position="absolute",g.method="POST",g.enctype="application/x-www-form-urlencoded",g.acceptCharset="UTF-8",g.appendChild(h),a.body.appendChild(g)}var g=f._send_form,h=f._send_area,i="a"+c.random_string(8);g.target=i,g.action=b+"/jsonp_send?i="+i;var j;try{j=a.createElement('<iframe name="'+i+'">')}catch(k){j=a.createElement("iframe"),j.name=i}j.id=i,g.appendChild(j),j.style.display="none";try{h.value=d}catch(l){c.log("Your browser is seriously broken. Go home! "+l.message)}g.submit();var m=function(a){if(!j.onerror)return;j.onreadystatechange=j.onerror=j.onload=null,c.delay(500,function(){j.parentNode.removeChild(j),j=null}),h.value="",e(!0)};return j.onerror=j.onload=m,j.onreadystatechange=function(a){j.readyState=="complete"&&m()},m},C=function(a){return function(b,c,d){var e=new a("POST",b+"/xhr_send",c);return e.onfinish=function(a,b){d(a===200||a===204,"http status "+a)},function(a){d(!1,a)}}},D=function(b,d){var e,f=a.createElement("script"),g,h=function(a){g&&(g.parentNode.removeChild(g),g=null),f&&(clearTimeout(e),f.parentNode.removeChild(f),f.onreadystatechange=f.onerror=f.onload=f.onclick=null,f=null,d(a),d=null)},i=!1,j=null;f.id="a"+c.random_string(8),f.src=b,f.type="text/javascript",f.charset="UTF-8",f.onerror=function(a){j||(j=setTimeout(function(){i||h(c.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},f.onload=function(a){h(c.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},f.onreadystatechange=function(a){if(/loaded|closed/.test(f.readyState)){if(f&&f.htmlFor&&f.onclick){i=!0;try{f.onclick()}catch(b){}}f&&h(c.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}};if(typeof f.async=="undefined"&&a.attachEvent)if(!/opera/i.test(navigator.userAgent)){try{f.htmlFor=f.id,f.event="onclick"}catch(k){}f.async=!0}else g=a.createElement("script"),g.text="try{var a = document.getElementById('"+f.id+"'); if(a)a.onerror();}catch(x){};",f.async=g.async=!1;typeof f.async!="undefined"&&(f.async=!0),e=setTimeout(function(){h(c.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var l=a.getElementsByTagName("head")[0];return l.insertBefore(f,l.firstChild),g&&l.insertBefore(g,l.firstChild),h},E=y["jsonp-polling"]=function(a,b){c.polluteGlobalNamespace();var d=this;d.ri=a,d.trans_url=b,d.send_constructor(B),d._schedule_recv()};E.prototype=new A,E.prototype._schedule_recv=function(){var a=this,b=function(b){a._recv_stop=null,b&&(a._is_closing||a.ri._didMessage(b)),a._is_closing||a._schedule_recv()};a._recv_stop=F(a.trans_url+"/jsonp",D,b)},E.enabled=function(){return!0},E.need_body=!0,E.prototype.doCleanup=function(){var a=this;a._is_closing=!0,a._recv_stop&&a._recv_stop(),a.ri=a._recv_stop=null,a.send_destructor()};var F=function(a,d,e){var f="a"+c.random_string(6),g=a+"?c="+escape(h+"."+f),i=0,j=function(a){switch(i){case 0:delete b[h][f],e(a);break;case 1:e(a),i=2;break;case 2:delete b[h][f]}},k=d(g,j);b[h][f]=k;var l=function(){b[h][f]&&(i=1,b[h][f](c.closeFrame(1e3,"JSONP user aborted read")))};return l},G=function(){};G.prototype=new A,G.prototype.run=function(a,b,c,d,e){var f=this;f.ri=a,f.trans_url=b,f.send_constructor(C(e)),f.poll=new $(a,d,b+c,e)},G.prototype.doCleanup=function(){var a=this;a.poll&&(a.poll.abort(),a.poll=null)};var H=y["xhr-streaming"]=function(a,b){this.run(a,b,"/xhr_streaming",bd,c.XHRCorsObject)};H.prototype=new G,H.enabled=function(){return b.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},H.roundTrips=2,H.need_body=!0;var I=y["xdr-streaming"]=function(a,b){this.run(a,b,"/xhr_streaming",bd,c.XDRObject)};I.prototype=new G,I.enabled=function(){return!!b.XDomainRequest},I.roundTrips=2;var J=y["xhr-polling"]=function(a,b){this.run(a,b,"/xhr",bd,c.XHRCorsObject)};J.prototype=new G,J.enabled=H.enabled,J.roundTrips=2;var K=y["xdr-polling"]=function(a,b){this.run(a,b,"/xhr",bd,c.XDRObject)};K.prototype=new G,K.enabled=I.enabled,K.roundTrips=2;var L=function(){};L.prototype.i_constructor=function(a,b,d){var e=this;e.ri=a,e.origin=c.getOrigin(d),e.base_url=d,e.trans_url=b;var f=d+"/iframe.html";e.ri._options.devel&&(f+="?t="+ +(new Date)),e.window_id=c.random_string(8),f+="#"+e.window_id,e.iframeObj=c.createIframe(f,function(a){e.ri._didClose(1006,"Unable to load an iframe ("+a+")")}),e.onmessage_cb=c.bind(e.onmessage,e),c.attachMessage(e.onmessage_cb)},L.prototype.doCleanup=function(){var a=this;if(a.iframeObj){c.detachMessage(a.onmessage_cb);try{a.iframeObj.iframe.contentWindow&&a.postMessage("c")}catch(b){}a.iframeObj.cleanup(),a.iframeObj=null,a.onmessage_cb=a.iframeObj=null}},L.prototype.onmessage=function(a){var b=this;if(a.origin!==b.origin)return;var c=a.data.slice(0,8),d=a.data.slice(8,9),e=a.data.slice(9);if(c!==b.window_id)return;switch(d){case"s":b.iframeObj.loaded(),b.postMessage("s",JSON.stringify([y.version,b.protocol,b.trans_url,b.base_url]));break;case"t":b.ri._didMessage(e)}},L.prototype.postMessage=function(a,b){var c=this;c.iframeObj.post(c.window_id+a+(b||""),c.origin)},L.prototype.doSend=function(a){this.postMessage("m",a)},L.enabled=function(){var a=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return(typeof b.postMessage=="function"||typeof b.postMessage=="object")&&!a};var M,N=function(a,d){parent!==b?parent.postMessage(M+a+(d||""),"*"):c.log("Can't postMessage, no parent window.",a,d)},O=function(){};O.prototype._didClose=function(a,b){N("t",c.closeFrame(a,b))},O.prototype._didMessage=function(a){N("t",a)},O.prototype._doSend=function(a){this._transport.doSend(a)},O.prototype._doCleanup=function(){this._transport.doCleanup()},c.parent_origin=undefined,y.bootstrap_iframe=function(){var d;M=a.location.hash.slice(1);var e=function(a){if(a.source!==parent)return;typeof c.parent_origin=="undefined"&&(c.parent_origin=a.origin);if(a.origin!==c.parent_origin)return;var e=a.data.slice(0,8),f=a.data.slice(8,9),g=a.data.slice(9);if(e!==M)return;switch(f){case"s":var h=JSON.parse(g),i=h[0],j=h[1],k=h[2],l=h[3];i!==y.version&&c.log('Incompatibile SockJS! Main site uses: "'+i+'", the iframe:'+' "'+y.version+'".');if(!c.flatUrl(k)||!c.flatUrl(l)){c.log("Only basic urls are supported in SockJS");return}if(!c.isSameOriginUrl(k)||!c.isSameOriginUrl(l)){c.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([b.location.href,k,l])+")");return}d=new O,d._transport=new O[j](d,k,l);break;case"m":d._doSend(g);break;case"c":d&&d._doCleanup(),d=null}};c.attachMessage(e),N("s")};var P=function(a,b){var d=this;c.delay(function(){d.doXhr(a,b)})};P.prototype=new f(["finish"]),P.prototype.doXhr=function(a,b){var d=this,e=(new Date).getTime(),f=new b("GET",a+"/info"),g=c.delay(8e3,function(){f.ontimeout()});f.onfinish=function(a,b){clearTimeout(g),g=null;if(a===200){var c=(new Date).getTime()-e,f=JSON.parse(b);typeof f!="object"&&(f={}),d.emit("finish",f,c)}else d.emit("finish")},f.ontimeout=function(){f.close(),d.emit("finish")}};var Q=function(b){var d=this,e=function(){var a=new L;a.protocol="w-iframe-info-receiver";var c=function(b){if(typeof b=="string"&&b.substr(0,1)==="m"){var c=JSON.parse(b.substr(1)),e=c[0],f=c[1];d.emit("finish",e,f)}else d.emit("finish");a.doCleanup(),a=null},e={_options:{},_didClose:c,_didMessage:c};a.i_constructor(e,b,b)};a.body?e():c.attachEvent("load",e)};Q.prototype=new f(["finish"]);var R=function(){var a=this;c.delay(function(){a.emit("finish",{},2e3)})};R.prototype=new f(["finish"]);var S=function(a){if(c.isSameOriginUrl(a))return new P(a,c.XHRLocalObject);switch(c.isXHRCorsCapable()){case 1:return new P(a,c.XHRLocalObject);case 2:return new P(a,c.XDRObject);case 3:return new Q(a);default:return new R}},T=O["w-iframe-info-receiver"]=function(a,b,d){var e=new P(d,c.XHRLocalObject);e.onfinish=function(b,c){a._didMessage("m"+JSON.stringify([b,c])),a._didClose()}};T.prototype.doCleanup=function(){};var U=y["iframe-eventsource"]=function(){var a=this;a.protocol="w-iframe-eventsource",a.i_constructor.apply(a,arguments)};U.prototype=new L,U.enabled=function(){return"EventSource"in b&&L.enabled()},U.need_body=!0,U.roundTrips=3;var V=O["w-iframe-eventsource"]=function(a,b){this.run(a,b,"/eventsource",_,c.XHRLocalObject)};V.prototype=new G;var W=y["iframe-xhr-polling"]=function(){var a=this;a.protocol="w-iframe-xhr-polling",a.i_constructor.apply(a,arguments)};W.prototype=new L,W.enabled=function(){return b.XMLHttpRequest&&L.enabled()},W.need_body=!0,W.roundTrips=3;var X=O["w-iframe-xhr-polling"]=function(a,b){this.run(a,b,"/xhr",bd,c.XHRLocalObject)};X.prototype=new G;var Y=y["iframe-htmlfile"]=function(){var a=this;a.protocol="w-iframe-htmlfile",a.i_constructor.apply(a,arguments)};Y.prototype=new L,Y.enabled=function(){return L.enabled()},Y.need_body=!0,Y.roundTrips=3;var Z=O["w-iframe-htmlfile"]=function(a,b){this.run(a,b,"/htmlfile",bc,c.XHRLocalObject)};Z.prototype=new G;var $=function(a,b,c,d){var e=this;e.ri=a,e.Receiver=b,e.recv_url=c,e.AjaxObject=d,e._scheduleRecv()};$.prototype._scheduleRecv=function(){var a=this,b=a.poll=new a.Receiver(a.recv_url,a.AjaxObject),c=0;b.onmessage=function(b){c+=1,a.ri._didMessage(b.data)},b.onclose=function(c){a.poll=b=b.onmessage=b.onclose=null,a.poll_is_closing||(c.reason==="permanent"?a.ri._didClose(1006,"Polling error ("+c.reason+")"):a._scheduleRecv())}},$.prototype.abort=function(){var a=this;a.poll_is_closing=!0,a.poll&&a.poll.abort()};var _=function(a){var b=this,d=new EventSource(a);d.onmessage=function(a){b.dispatchEvent(new e("message",{data:unescape(a.data)}))},b.es_close=d.onerror=function(a,f){var g=f?"user":d.readyState!==2?"network":"permanent";b.es_close=d.onmessage=d.onerror=null,d.close(),d=null,c.delay(200,function(){b.dispatchEvent(new e("close",{reason:g}))})}};_.prototype=new d,_.prototype.abort=function(){var a=this;a.es_close&&a.es_close({},!0)};var ba,bb=function(){if(ba===undefined)if("ActiveXObject"in b)try{ba=!!(new ActiveXObject("htmlfile"))}catch(a){}else ba=!1;return ba},bc=function(a){var d=this;c.polluteGlobalNamespace(),d.id="a"+c.random_string(6,26),a+=(a.indexOf("?")===-1?"?":"&")+"c="+escape(h+"."+d.id);var f=bb()?c.createHtmlfile:c.createIframe,g;b[h][d.id]={start:function(){g.loaded()},message:function(a){d.dispatchEvent(new e("message",{data:a}))},stop:function(){d.iframe_close({},"network")}},d.iframe_close=function(a,c){g.cleanup(),d.iframe_close=g=null,delete b[h][d.id],d.dispatchEvent(new e("close",{reason:c}))},g=f(a,function(a){d.iframe_close({},"permanent")})};bc.prototype=new d,bc.prototype.abort=function(){var a=this;a.iframe_close&&a.iframe_close({},"user")};var bd=function(a,b){var c=this,d=0;c.xo=new b("POST",a,null),c.xo.onchunk=function(a,b){if(a!==200)return;for(;;){var f=b.slice(d),g=f.indexOf("\n");if(g===-1)break;d+=g+1;var h=f.slice(0,g);c.dispatchEvent(new e("message",{data:h}))}},c.xo.onfinish=function(a,b){c.xo.onchunk(a,b),c.xo=null;var d=a===200?"network":"permanent";c.dispatchEvent(new e("close",{reason:d}))}};return bd.prototype=new d,bd.prototype.abort=function(){var a=this;a.xo&&(a.xo.close(),a.dispatchEvent(new e("close",{reason:"user"})),a.xo=null)},y.getUtils=function(){return c},y.getIframeTransport=function(){return L},y}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),typeof define=="function"&&define.amd&&define("sockjs",[],function(){return SockJS})
/*
* stomp.js
*/
Stomp=function(){var n,p,q,r={}.hasOwnProperty;p=function(){function d(c,a,b){this.b=c;this.headers=null!=a?a:{};this.body=null!=b?b:""}d.prototype.toString=function(){var c,a,b,d;c=[this.b];d=this.headers;for(a in d)r.call(d,a)&&(b=d[a],c.push(""+a+":"+b));this.body&&c.push("content-length:"+(""+this.body).length);c.push("\n"+this.body);return c.join("\n")};d.a=function(c){var a,b,h,e,k,l,g,f,m;e=c.search(/\n\n/);a=c.substring(0,e).split("\n");h=a.shift();k={};g=function(a){return a.replace(/^\s+|\s+$/g,
"")};l=b=null;b=f=0;for(m=a.length;0<=m?f<m:f>m;b=0<=m?++f:--f)l=a[b],b=l.indexOf(":"),k[g(l.substring(0,b))]=g(l.substring(b+1));a="";e+=2;if(k["content-length"])b=parseInt(k["content-length"]),a=(""+c).substring(e,e+b);else for(b=null,b=g=e,f=c.length;e<=f?g<f:g>f;b=e<=f?++g:--g){b=c.charAt(b);if("\x00"===b)break;a+=b}return new d(h,k,a)};d.o=function(c){var a,b,h,e;h=c.split(/\x00\n*/);e=[];a=0;for(b=h.length;a<b;a++)c=h[a],0<(null!=c?c.length:void 0)&&e.push(d.a(c));return e};d.l=function(c,a,
b){return(new d(c,a,b)).toString()+"\x00"};return d}();n=function(){return function(d){this.c=d;this.c.binaryType="arraybuffer"}}();return q={k:"2.0.0-next",h:{e:"1.0",f:"1.1",g:"1.2",n:function(){return"1.1,1.0"}},j:function(d,c){var a;null==c&&(c=["v10.stomp","v11.stomp"]);a=new (q.i||WebSocket)(d,c);return new n(a)},m:function(d){return new n(d)},d:p}}();
/*
* json2
*/
var JSON;JSON||(JSON={});
(function(){function m(a){return 10>a?"0"+a:a}function r(a){s.lastIndex=0;return s.test(a)?'"'+a.replace(s,function(a){var c=u[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function p(a,l){var c,d,h,q,g=e,f,b=l[a];b&&"object"===typeof b&&"function"===typeof b.toJSON&&(b=b.toJSON(a));"function"===typeof k&&(b=k.call(l,a,b));switch(typeof b){case "string":return r(b);case "number":return isFinite(b)?String(b):"null";case "boolean":case "null":return String(b);case "object":if(!b)return"null";
e+=n;f=[];if("[object Array]"===Object.prototype.toString.apply(b)){q=b.length;for(c=0;c<q;c+=1)f[c]=p(c,b)||"null";h=0===f.length?"[]":e?"[\n"+e+f.join(",\n"+e)+"\n"+g+"]":"["+f.join(",")+"]";e=g;return h}if(k&&"object"===typeof k)for(q=k.length,c=0;c<q;c+=1)"string"===typeof k[c]&&(d=k[c],(h=p(d,b))&&f.push(r(d)+(e?": ":":")+h));else for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(h=p(d,b))&&f.push(r(d)+(e?": ":":")+h);h=0===f.length?"{}":e?"{\n"+e+f.join(",\n"+e)+"\n"+g+"}":"{"+f.join(",")+
"}";e=g;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+m(this.getUTCMonth()+1)+"-"+m(this.getUTCDate())+"T"+m(this.getUTCHours())+":"+m(this.getUTCMinutes())+":"+m(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var t=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,l,c){var d;n=e="";if("number"===typeof c)for(d=0;d<c;d+=1)n+=" ";else"string"===typeof c&&(n=c);if((k=l)&&"function"!==typeof l&&("object"!==typeof l||"number"!==typeof l.length))throw Error("JSON.stringify");return p("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,e){function c(a,d){var g,f,b=a[d];if(b&&"object"===typeof b)for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&(f=c(b,g),void 0!==f?b[g]=f:delete b[g]);return e.call(a,d,b)}var d;a=String(a);t.lastIndex=0;t.test(a)&&(a=a.replace(t,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof e?c({"":d},""):d;throw new SyntaxError("JSON.parse");})})();
/*
* jquery.iecors.js
*/
(function(b){b.c.a=function(){return window.XDomainRequest?new window.XDomainRequest:null};(function(a){b.extend(b.e,{d:!!a})})(b.c.a());b.e.d&&b.f(function(a){return{send:function(b,d){var c=a.a();c.onload=function(){d(200,"OK",{text:c.responseText},{"Content-Type":c.contentType})};a.b&&(xhr.onerror=a.b.error,xhr.ontimeout=a.b.timeout);c.open(a.type,a.url);c.send(a.g&&a.data||null)},abort:function(){xdr.abort()}}})})(jQuery);
/*
* jquery.easydate.js
*/
(function(a){function c(a,c,b){isNaN(c)||1==c||(a+="s");return b.locale[a]||a}a.c={};a.c.d={};a.c.d.f={future_format:"%s %t",past_format:"%t %s",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days",week:"week",weeks:"weeks",month:"month",months:"months",year:"year",years:"years",yesterday:"yesterday",tomorrow:"tomorrow",now:"just now",ago:"ago","in":"in"};a.c.d.l={future_format:"%s %t",past_format:"%s %t",second:"segon",seconds:"segons",
minute:"minut",minutes:"minuts",hour:"hora",hours:"hores",day:"dia",days:"dies",week:"setmana",weeks:"setmanes",month:"mes",months:"mesos",year:"any",years:"anys",yesterday:"ahir",tomorrow:"dem\u00e0",now:"fa un moment",ago:"fa","in":"en"};a.c.d.m={future_format:"%s %t",past_format:"%s %t",second:"segundo",seconds:"segundos",minute:"minuto",minutes:"minutos",hour:"hora",hours:"horas",day:"dia",days:"dias",week:"semana",weeks:"semanas",month:"mes",months:"meses",year:"a\u00f1o",years:"a\u00f1os",yesterday:"ayer",
tomorrow:"ma\u00f1ana",now:"hace un instante",ago:"hace","in":"en"};var k={o:!0,p:!0,g:!0,h:!0,e:[{name:"now",a:5},{name:"second",a:60,b:1},{name:"minute",a:3600,b:60},{name:"hour",a:86400,b:3600},{name:"yesterday",a:172800,j:!0},{name:"tomorrow",a:172800,i:!0},{name:"day",a:604800,b:86400},{name:"week",a:2629743,b:604800},{name:"month",a:31556926,b:2629743},{name:"year",a:Infinity,b:31556926}],k:function(a){return a.toLocaleDateString()},locale:a.c.d.f};a.c.n=function(g,h){var b=a.extend({},k);b.locale=
a.c.d[h];var d=((new Date).getTime()-g.getTime())/1E3,e=Math.abs(d);if(!(isNaN(d)||!b.g&&0>d||!b.h&&0<d)){for(var l in b.e){var f=b.e[l];if(!(f.j&&0>d||f.i&&0<d)&&e<f.a){if(isNaN(f.b))return c(f.name,NaN,b);e/=f.b;e=Math.round(e);return(0>d?c("future_format",NaN,b).replace("%s",c("in",NaN,b)):c("past_format",NaN,b).replace("%s",c("ago",NaN,b))).replace("%t",e+" "+c(f.name,e,b))}}return b.k(g)}}})(jQuery);
/*
* hogan.js
*/
var t=function(){function l(l){this.text=l}l.prototype={k:function(){return""}};return l}(),w=function(){function l(a,b){function c(){0<m.length&&(g.push(new String(m)),m="")}function f(a,b){c();var d;if(d=a)a:{d=!0;for(var e=n;e<g.length;e++)if(d=g[e].b&&u[g[e].b]<u._v||!g[e].b&&null===g[e].match(z),!d){d=!1;break a}}if(d){d=n;for(var f;d<g.length;d++)g[d].b||((f=g[d+1])&&">"==f.b&&(f.h=g[d].toString()),g.splice(d,1))}else b||g.push({b:"\n"});k=!1;n=g.length}function d(a,b){var c="="+p,d=a.indexOf(c,
b),e=(a.substring(a.indexOf("=",b)+1,d).trim?a.substring(a.indexOf("=",b)+1,d).trim():a.substring(a.indexOf("=",b)+1,d).replace(/^\s*|\s*$/g,"")).split(" ");q=e[0];p=e[1];return d+c.length-1}var h=a.length,r=0,s=null,l=null,m="",g=[],k=!1,e=0,n=0,q="{{",p="}}";b&&(b=b.split(" "),q=b[0],p=b[1]);for(e=0;e<h;e++)0==r?x(q,a,e)?(--e,c(),r=1):"\n"==a.charAt(e)?f(k):m+=a.charAt(e):1==r?(e+=q.length-1,s=(l=u[a.charAt(e+1)])?a.charAt(e+1):"_v","="==s?(e=d(a,e),r=0):(l&&e++,r=2),k=e):x(p,a,e)?(g.push({b:s,
a:m.trim?m.trim():m.replace(/^\s*|\s*$/g,""),j:q,g:p,e:"/"==s?k-p.length:e+q.length}),m="",e+=p.length-1,r=0,"{"==s&&e++):m+=a.charAt(e);f(k,!0);return g}function x(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var f=1,d=a.length;f<d;f++)if(b.charAt(c+f)!=a.charAt(f))return!1;return!0}function y(a,b,c){for(var f=[],d=null,h=null;0<a.length;){h=a.shift();if(!(d="#"==h.b)&&!(d="^"==h.b))a:{for(var d=h,k=c,l=0,n=k.length;l<n;l++)if(k[l].i==d.a){d.b="#";d=!0;break a}d=void 0}if(d)b.push(h),h.f=y(a,
b,c);else if("/"==h.b){if(0===b.length)throw Error("Closing tag without opener: /"+h.a);d=b.pop();if(a=h.a!=d.a){a:{a=0;for(b=c.length;a<b;a++)if(c[a].q==h.a&&c[a].i==d.a){c=!0;break a}c=void 0}a=!c}if(a)throw Error("Nesting error: "+d.a+" vs. "+h.a);d.end=h.e;return f}f.push(h)}if(0<b.length)throw Error("missing closing tag: "+b.pop().a);return f}function k(a){return a.replace(A,"\\\\").replace(B,'\\"').replace(C,"\\n").replace(D,"\\r")}function n(a){return~a.indexOf(".")?"d":"f"}function v(a){for(var b=
"",c=0,f=a.length;c<f;c++){var d=a[c].b;"#"==d?b+="if(_.s(_."+n(a[c].a)+'("'+k(a[c].a)+'",c,p,1),c,p,0,'+a[c].e+","+a[c].end+', "'+(a[c].j+" "+a[c].g)+'")){b += _.rs(c,p,function(c,p){ var b = "";'+v(a[c].f)+'return b;});c.pop();}else{b += _.b; _.b = ""};':"^"==d?b+="if (!_.s(_."+n(a[c].a)+'("'+k(a[c].a)+'",c,p,1),c,p,1,0,0,"")){'+v(a[c].f)+"};":"<"==d||">"==d?b+='b += _.rp("'+k(a[c].a)+'",c[c.length - 1],p,"'+(a[c].h||"")+'");':"{"==d||"&"==d?b+="b += (_."+n(a[c].a)+'("'+k(a[c].a)+'",c,p,0));':"\n"==
d?b+='b += "\\n"'+(a.length-1==c?"":" + i")+";":"_v"==d?b+="b += (_.v(_."+n(a[c].a)+'("'+k(a[c].a)+'",c,p,0)));':void 0===d&&(d='"'+k(a[c])+'"',b+="b += "+d+";")}return b}var z=/\S/,B=/\"/g,C=/\n/g,D=/\r/g,A=/\\/g,u={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};return{s:l,parse:function(a,b){b=b||{};return y(a,[],b.t||[])},c:{},compile:function(a,b){b=b||{};var c=this.c[a];if(c)return c;var f=this.parse(l(a,b.r),b),c=b,f='i = i || "";var c = [cx];var b = i + "";var _ = this;'+v(f)+
"return b;";c.p?c="function(cx,p,i){"+f+";}":(c=new t(a),c.k=new Function("cx","p","i",f));return this.c[a]=c}}}();"undefined"!==typeof module&&module.d?(module.d=w,module.d.n=t):"function"===typeof define&&define.o?define(function(){return w}):"undefined"!==typeof exports&&(exports.l=w,exports.m=t);
/*
* jquery.mousewheel.js
*/
(function(d){function e(a){var b=a||window.event,c=[].slice.call(arguments,1),f=0,e=0,g=0;a=d.event.d(b);a.type="mousewheel";b.wheelDelta&&(f=b.wheelDelta/120);b.detail&&(f=-b.detail/3);g=f;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(g=0,e=-1*f);void 0!==b.wheelDeltaY&&(g=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(e=-1*b.wheelDeltaX/120);c.unshift(a,f,e,g);return(d.event.c||d.event.handle).apply(this,c)}var c=["DOMMouseScroll","mousewheel"];if(d.event.a)for(var h=c.length;h;)d.event.a[c[--h]]=
d.event.f;d.event.h.b={g:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],e,!1);else this.onmousewheel=e},i:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],e,!1);else this.onmousewheel=null}};d.e.extend({b:function(a){return a?this.bind("mousewheel",a):this.j("mousewheel")},l:function(a){return this.k("mousewheel",a)}})})(jQuery);
/*
* jquery.jscrollpane.js
*/
(function(b,Ha,u){b.fn.jScrollPane=function(B){function ea(c,B){function fa(a){var d,l,ma,q,r,s=!1,m=!1;e=a;if(f===u)q=c.scrollTop(),r=c.scrollLeft(),c.css({overflow:"hidden",padding:0}),h=c.innerWidth()+N,k=c.innerHeight(),c.width(h),f=b('<div class="jspPane" />').css("padding",na).append(c.children()),g=b('<div class="jspContainer" />').css({width:h+"px",height:k+"px"}).append(f).appendTo(c);else{c.css("width","");s=e.stickToBottom&&wa();m=e.stickToRight&&xa();if(ma=c.innerWidth()+N!=h||c.outerHeight()!=
k)h=c.innerWidth()+N,k=c.innerHeight(),g.css({width:h+"px",height:k+"px"});if(!ma&&oa==v&&f.outerHeight()==t){c.width(h);return}oa=v;f.css("width","");c.width(h);g.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}f.css("overflow","auto");v=a.contentWidth?a.contentWidth:f[0].scrollWidth;t=f[0].scrollHeight;f.css("overflow","");ga=v/h;X=t/k;y=1<X;if((z=1<ga)||y){c.addClass("jspScrollable");if(a=e.maintainPosition&&(n||p))d=F(),l=G();ea();ya();za();a&&(P(m?v-h:d,!1),H(s?t-k:l,!1));Aa();Ba();
Ca();e.enableKeyboardNavigation&&Da();e.clickOnTrack&&Ea();Fa();e.hijackInternalLinks&&pa()}else c.removeClass("jspScrollable"),f.css({top:0,width:g.width()-N}),g.unbind(ha),f.find(":input,a").unbind("focus.jsp"),c.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),qa(),ra();e.autoReinitialise&&!Y?Y=setInterval(function(){fa(e)},e.autoReinitialiseDelay):!e.autoReinitialise&&Y&&clearInterval(Y);q&&c.scrollTop(0)&&H(q,!1);r&&c.scrollLeft(0)&&P(r,!1);c.trigger("jsp-initialised",
[z||y])}function ea(){y&&(g.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />'))),Z=g.find(">.jspVerticalBar"),C=Z.find(">.jspTrack"),w=C.find(">.jspDrag"),e.showArrows&&(S=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",I(0,-1)).bind("click.jsp",Q),T=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",
I(0,1)).bind("click.jsp",Q),e.arrowScrollOnHover&&(S.bind("mouseover.jsp",I(0,-1,S)),T.bind("mouseover.jsp",I(0,1,T))),sa(C,e.verticalArrowPositions,S,T)),J=k,g.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){J-=b(this).outerHeight()}),w.hover(function(){w.addClass("jspHover")},function(){w.removeClass("jspHover")}).bind("mousedown.jsp",function(a){b("html").bind("dragstart.jsp selectstart.jsp",Q);w.addClass("jspActive");var d=a.pageY-w.position().top;b("html").bind("mousemove.jsp",
function(a){O(a.pageY-d,!1)}).bind("mouseup.jsp mouseleave.jsp",ta);return!1}),ua())}function ua(){C.height(J+"px");n=0;ia=e.verticalGutter+C.outerWidth();f.width(h-ia-N);try{0===Z.position().left&&f.css("margin-left",ia+"px")}catch(a){}}function ya(){z&&(g.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />'))),
$=g.find(">.jspHorizontalBar"),D=$.find(">.jspTrack"),x=D.find(">.jspDrag"),e.showArrows&&(U=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",I(-1,0)).bind("click.jsp",Q),V=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",I(1,0)).bind("click.jsp",Q),e.arrowScrollOnHover&&(U.bind("mouseover.jsp",I(-1,0,U)),V.bind("mouseover.jsp",I(1,0,V))),sa(D,e.horizontalArrowPositions,U,V)),x.hover(function(){x.addClass("jspHover")},function(){x.removeClass("jspHover")}).bind("mousedown.jsp",
function(a){b("html").bind("dragstart.jsp selectstart.jsp",Q);x.addClass("jspActive");var d=a.pageX-x.position().left;b("html").bind("mousemove.jsp",function(a){R(a.pageX-d,!1)}).bind("mouseup.jsp mouseleave.jsp",ta);return!1}),A=g.innerWidth(),va())}function va(){g.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){A-=b(this).outerWidth()});D.width(A+"px");p=0}function za(){if(z&&y){var a=D.outerHeight(),d=C.outerWidth();J-=a;b($).find(">.jspCap:visible,>.jspArrow").each(function(){A+=
b(this).outerWidth()});A-=d;k-=d;h-=a;D.parent().append(b('<div class="jspCorner" />').css("width",a+"px"));ua();va()}z&&f.width(g.outerWidth()-N+"px");t=f.outerHeight();X=t/k;z&&(K=Math.ceil(1/ga*A),K>e.horizontalDragMaxWidth?K=e.horizontalDragMaxWidth:K<e.horizontalDragMinWidth&&(K=e.horizontalDragMinWidth),x.width(K+"px"),L=A-K,ja(p));y&&(M=Math.ceil(1/X*J),M>e.verticalDragMaxHeight?M=e.verticalDragMaxHeight:M<e.verticalDragMinHeight&&(M=e.verticalDragMinHeight),w.height(M+"px"),E=J-M,ka(n))}function sa(a,
d,l,e){var b="before",c="after";"os"==d&&(d=/Mac/.test(navigator.platform)?"after":"split");d==b?c=d:d==c&&(b=d,d=l,l=e,e=d);a[b](l)[c](e)}function I(a,d,e){return function(){Ga(a,d,this,e);this.blur();return!1}}function Ga(a,d,l,c){l=b(l).addClass("jspActive");var q,r,s=!0,f=function(){0!==a&&m.scrollByX(a*e.arrowButtonSpeed);0!==d&&m.scrollByY(d*e.arrowButtonSpeed);r=setTimeout(f,s?e.initialDelay:e.arrowRepeatFreq);s=!1};f();q=c?"mouseout.jsp":"mouseup.jsp";c=c||b("html");c.bind(q,function(){l.removeClass("jspActive");
r&&clearTimeout(r);r=null;c.unbind(q)})}function Ea(){qa();y&&C.bind("mousedown.jsp",function(a){if(a.originalTarget===u||a.originalTarget==a.currentTarget){var d=b(this),l=d.offset(),c=a.pageY-l.top-n,q,r=!0,s=function(){var b=d.offset(),b=a.pageY-b.top-M/2,l=k*e.scrollPagePercent,g=E*l/(t-k);if(0>c)n-g>b?m.scrollByY(-l):O(b);else if(0<c)n+g<b?m.scrollByY(l):O(b);else{f();return}q=setTimeout(s,r?e.initialDelay:e.trackClickRepeatFreq);r=!1},f=function(){q&&clearTimeout(q);q=null;b(document).unbind("mouseup.jsp",
f)};s();b(document).bind("mouseup.jsp",f);return!1}});z&&D.bind("mousedown.jsp",function(a){if(a.originalTarget===u||a.originalTarget==a.currentTarget){var d=b(this),l=d.offset(),c=a.pageX-l.left-p,q,f=!0,s=function(){var b=d.offset(),b=a.pageX-b.left-K/2,l=h*e.scrollPagePercent,k=L*l/(v-h);if(0>c)p-k>b?m.scrollByX(-l):R(b);else if(0<c)p+k<b?m.scrollByX(l):R(b);else{g();return}q=setTimeout(s,f?e.initialDelay:e.trackClickRepeatFreq);f=!1},g=function(){q&&clearTimeout(q);q=null;b(document).unbind("mouseup.jsp",
g)};s();b(document).bind("mouseup.jsp",g);return!1}})}function qa(){D&&D.unbind("mousedown.jsp");C&&C.unbind("mousedown.jsp")}function ta(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");w&&w.removeClass("jspActive");x&&x.removeClass("jspActive")}function O(a,d){y&&(0>a?a=0:a>E&&(a=E),d===u&&(d=e.animateScroll),d?m.animate(w,"top",a,ka):(w.css("top",a),ka(a)))}function ka(a){a===u&&(a=w.position().top);g.scrollTop(0);n=a;var d=0===n,b=n==E;a=-(a/E)*(t-k);
if(aa!=d||ba!=b)aa=d,ba=b,c.trigger("jsp-arrow-change",[aa,ba,ca,da]);e.showArrows&&(S[d?"addClass":"removeClass"]("jspDisabled"),T[b?"addClass":"removeClass"]("jspDisabled"));f.css("top",a);c.trigger("jsp-scroll-y",[-a,d,b]).trigger("scroll")}function R(a,d){z&&(0>a?a=0:a>L&&(a=L),d===u&&(d=e.animateScroll),d?m.animate(x,"left",a,ja):(x.css("left",a),ja(a)))}function ja(a){a===u&&(a=x.position().left);g.scrollTop(0);p=a;var d=0===p,b=p==L;a=-(a/L)*(v-h);if(ca!=d||da!=b)ca=d,da=b,c.trigger("jsp-arrow-change",
[aa,ba,ca,da]);e.showArrows&&(U[d?"addClass":"removeClass"]("jspDisabled"),V[b?"addClass":"removeClass"]("jspDisabled"));f.css("left",a);c.trigger("jsp-scroll-x",[-a,d,b]).trigger("scroll")}function H(a,d){O(a/(t-k)*E,d)}function P(a,d){R(a/(v-h)*L,d)}function W(a,d,c){var f,q,r=0,s=0,m,n,p;try{f=b(a)}catch(t){return}q=f.outerHeight();a=f.outerWidth();g.scrollTop(0);for(g.scrollLeft(0);!f.is(".jspPane");)if(r+=f.position().top,s+=f.position().left,f=f.offsetParent(),/^body|html$/i.test(f[0].nodeName))return;
f=G();m=f+k;r<f||d?n=r-e.verticalGutter:r+q>m&&(n=r-k+q+e.verticalGutter);n&&H(n,c);r=F();n=r+h;s<r||d?p=s-e.horizontalGutter:s+a>n&&(p=s-h+a+e.horizontalGutter);p&&P(p,c)}function F(){return-f.position().left}function G(){return-f.position().top}function wa(){var a=t-k;return 20<a&&10>a-G()}function xa(){var a=v-h;return 20<a&&10>a-F()}function Ba(){g.unbind(ha).bind(ha,function(a,d,b,c){a=p;d=n;m.scrollBy(b*e.mouseWheelSpeed,-c*e.mouseWheelSpeed,!1);return a==p&&d==n})}function Q(){return!1}function Aa(){f.find(":input,a").unbind("focus.jsp").bind("focus.jsp",
function(a){W(a.target,!1)})}function Da(){function a(){var a=p,b=n;switch(d){case 40:m.scrollByY(e.keyboardSpeed,!1);break;case 38:m.scrollByY(-e.keyboardSpeed,!1);break;case 34:case 32:m.scrollByY(k*e.scrollPagePercent,!1);break;case 33:m.scrollByY(-k*e.scrollPagePercent,!1);break;case 39:m.scrollByX(e.keyboardSpeed,!1);break;case 37:m.scrollByX(-e.keyboardSpeed,!1)}return l=a!=p||b!=n}var d,l,h=[];z&&h.push($[0]);y&&h.push(Z[0]);f.focus(function(){c.focus()});c.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",
function(c){if(c.target===this||h.length&&b(c.target).closest(h).length){var e=p,f=n;switch(c.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=c.keyCode;a();break;case 35:H(t-k);d=null;break;case 36:H(0),d=null}l=c.keyCode==d&&e!=p||f!=n;return!l}}).bind("keypress.jsp",function(b){b.keyCode==d&&a();return!l});e.hideFocus?(c.css("outline","none"),"hideFocus"in g[0]&&c.attr("hideFocus",!0)):(c.css("outline",""),"hideFocus"in g[0]&&c.attr("hideFocus",!1))}function Fa(){if(location.hash&&
1<location.hash.length){var a,d,c=escape(location.hash);try{a=b(c)}catch(e){return}a.length&&f.find(c)&&(0===g.scrollTop()?d=setInterval(function(){0<g.scrollTop()&&(W(c,!0),b(document).scrollTop(g.position().top),clearInterval(d))},50):(W(c,!0),b(document).scrollTop(g.position().top)))}}function ra(){b("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function pa(){ra();b("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var a=this.href.split("#");if(1<a.length&&
(a=a[1],0<a.length&&0<f.find("#"+a).length))return W("#"+a,!0),!1})}function Ca(){var a,d,b,c,e,f=!1;g.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(g){g=g.originalEvent.touches[0];a=F();d=G();b=g.pageX;c=g.pageY;e=!1;f=!0}).bind("touchmove.jsp",function(g){if(f){g=g.originalEvent.touches[0];var h=p,k=n;m.scrollTo(a+b-g.pageX,d+c-g.pageY);e=e||5<Math.abs(b-g.pageX)||5<Math.abs(c-g.pageY);return h==p&&k==n}}).bind("touchend.jsp",function(a){f=
!1}).bind("click.jsp-touchclick",function(a){if(e)return e=!1})}var e,m=this,f,h,k,g,v,t,ga,X,y,z,w,E,n,x,L,p,Z,C,ia,J,M,S,T,$,D,A,K,U,V,Y,na,N,oa,aa=!0,ca=!0,ba=!1,da=!1,la=c.clone(!1,!1).empty(),ha=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";na=c.css("paddingTop")+" "+c.css("paddingRight")+" "+c.css("paddingBottom")+" "+c.css("paddingLeft");N=(parseInt(c.css("paddingLeft"),10)||0)+(parseInt(c.css("paddingRight"),10)||0);b.extend(m,{reinitialise:function(a){a=b.extend({},e,a);fa(a)},scrollToElement:function(a,
d,b){W(a,d,b)},scrollTo:function(a,d,b){P(a,b);H(d,b)},scrollToX:function(a,b){P(a,b)},scrollToY:function(a,b){H(a,b)},scrollToPercentX:function(a,b){P(a*(v-h),b)},scrollToPercentY:function(a,b){H(a*(t-k),b)},scrollBy:function(a,b,c){m.scrollByX(a,c);m.scrollByY(b,c)},scrollByX:function(a,b){var c=(F()+Math[0>a?"floor":"ceil"](a))/(v-h);R(c*L,b)},scrollByY:function(a,b){var c=(G()+Math[0>a?"floor":"ceil"](a))/(t-k);O(c*E,b)},positionDragX:function(a,b){R(a,b)},positionDragY:function(a,b){O(a,b)},
animate:function(a,b,c,f){var g={};g[b]=c;a.animate(g,{duration:e.animateDuration,easing:e.animateEase,queue:!1,step:f})},getContentPositionX:function(){return F()},getContentPositionY:function(){return G()},getContentWidth:function(){return v},getContentHeight:function(){return t},getPercentScrolledX:function(){return F()/(v-h)},getPercentScrolledY:function(){return G()/(t-k)},getIsScrollableH:function(){return z},getIsScrollableV:function(){return y},getContentPane:function(){return f},scrollToBottom:function(a){O(E,
a)},hijackInternalLinks:function(){pa()},destroy:function(){var a=G(),b=F();c.removeClass("jspScrollable").unbind(".jsp");c.replaceWith(la.append(f.children()));la.scrollTop(a);la.scrollLeft(b)}});fa(B)}B=b.extend({},b.fn.jScrollPane.defaults,B);b.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){B[this]=B[this]||B.speed});return this.each(function(){var c=b(this),u=c.data("jsp");u?u.reinitialise(B):(u=new ea(c,B),c.data("jsp",u))})};b.fn.jScrollPane.defaults=
{showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:u,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",
horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);
/*
* max.templates.js
*/

/*
* max.literals.js
*/

/*
* max.utils.js
*/

/*
* max.client.js
*/
Object.keys||(Object.keys=function(b){var c=[],a;for(a in b)Object.prototype.hasOwnProperty.call(b,a)&&c.push(a);return c});
/*
* max.ui.js
*/
(function(b){b.h.Mb=function(a){this.s=max.s();this.i=max.i();this.c={ea:!1,width:10,handle:{height:20}};this.a=b.extend({maxRequestsAPI:"jquery",maxServerURL:"https://max.upc.edu",readContext:void 0,writeContexts:[],activitySource:"timeline",enableAlerts:!1,UISection:"timeline",disableTimeline:!1,disableConversations:!1,conversationsSection:"conversations",currentConversationSection:"conversations",activitySortOrder:"activities",transports:void 0,domain:void 0,maximumConversations:20},a);this.a.bc=
this.a.g.replace(".","_");"timeline"==this.a.p&&"timeline"==this.a.ba&&this.a.X&&(this.a.X=void 0,this.a.P=[]);server_regex=regex=/(?:^https?:\/\/)*(.*?)(?:\/([^\/]*)+)?\/?$/g;groups=regex.exec(this.a.L);groups[2]&&(this.a.domain=groups[2]);this.language=a.language||"en";user_literals=a.e||{};this.a.e=b.extend(max.e(this.language),user_literals);!this.i.Kb()&&this.a.Xa&&(this.a.L=this.a.Xa);if(this.a.X)for(this.a.Aa=this.i.jb(this.a.X),this.a.P.push(this.a.X),this.a.Ca=[],wc=0;wc<this.a.P.length;wc++)this.a.Ca.push(this.i.jb(this.a.P[wc]));
this.a.w||(this.a.avatarURLpattern=this.a.L+"/people/{0}/avatar");this.a.Ka||(this.a.contextAvatarURLpattern=this.a.L+"/contexts/{0}/avatar");this.a.La||(this.a.conversationAvatarURLpattern=this.a.L+"/conversations/{0}/avatar");this.a.Cb&&b(window);this.k=new MaxClient;this.k.xb({$b:this.a.L,mode:this.a.Lb,g:this.a.g,ec:this.a.Nb});return this};b.h.Ta=function(a){maxui=this;data=JSON.parse(a.body);console.log("New message from user {0} on {1}".q(data.g,data.qa));"conversations"==maxui.a.p&&"messages"==
maxui.a.v?maxui.V(data.qa,function(){maxui.c.Z(100)}):"conversations"==maxui.a.p&&"conversations"==maxui.a.v&&maxui.U(function(){maxui.aa("conversations");$(".maxui-message-count:first").n({"background-color":"red"})})};b.h.ub=function(){maxui=this;maxui.c.Da=b(".maxui-dragger");maxui.c.ma=b("#maxui-scrollbar");b("#maxui-conversations").f("mousewheel",function(a,b,d,e){a.preventDefault();a.stopPropagation();maxui.c.enabled()&&(a=maxui.c.B.height()-maxui.c.D-maxui.c.handle.height,e=parseInt(maxui.c.B.n("margin-top"))+
-30*e,0<e&&(e=0),e<-1*a&&(e=-1*a),maxui.c.B.n({"margin-top":e}),maxui.c.ia(-100*e/a))});maxui.c.ja=function(a){var b=$("#maxui-conversations .maxui-wrapper").offset().top-maxui.offset().top-1;console.log(b);maxui.c.ma.n({height:a,top:b});maxui.c.D=a-maxui.c.handle.height-2};maxui.c.ka=function(a){maxui.c.B=b(a)};maxui.c.ia=function(a){margintop=maxui.c.D*a/100;maxui.c.Da.n({"margin-top":margintop})};maxui.c.Z=function(a){if(maxui.c.enabled()){var b=(maxui.c.B.height()-maxui.c.D-maxui.c.handle.height)*
a/100;maxui.c.B.n({"margin-top":-1*b});maxui.c.ia(a)}else maxui.c.B.n({"margin-top":""}),maxui.c.ia(0)};maxui.c.enabled=function(){return maxui.c.B.height()>maxui.c.D};b(document).f("mousemove",function(a){maxui.c.ea&&(a.stopPropagation(),a.preventDefault(),maxui.c.enabled()&&(a=a.clientY-maxui.c.ma.offset().top,0>a&&(a=0),a>=maxui.c.D&&(a=maxui.c.D),maxui.c.Z(100*a/maxui.c.D)))});b(document.body).f("mousedown",".maxui-dragger",function(a){a.stopPropagation();a.preventDefault();maxui.c.ea=!0});b(document).f("mouseup",
function(){maxui.c.ea=!1});b("#maxui-more-activities .maxui-button").click(function(a){a.preventDefault();b("#maxui-search").wa("folded")?maxui.Wa():(last_result_id=b(".maxui-activity:last").b("id"),maxui.N(last_result_id))});b("#maxui-search-toggle").click(function(a){a.preventDefault();b(this).wa("maxui-disabled")||(b("#maxui-search").J("folded"),b("#maxui-search").wa("folded")?maxui.H({}):maxui.N())});b("#maxui-activities").f("click",".maxui-commentaction",function(a){a.preventDefault();window.status=
"";b(this).t(".maxui-activity").find(".maxui-comments").toggle(200)});b("#maxui-activities").f("click",".maxui-actor",function(a){a.preventDefault();a=b(this).find(".maxui-username").text();maxui.ca({type:"actor",value:a});b("#maxui-search").J("folded",!1)});b("#maxui-activities").f("click",".maxui-hashtag",function(a){a.preventDefault();maxui.ca({type:"hashtag",value:b(this).b("value")});b("#maxui-search").J("folded",!1)});b("#maxui-search-filters").f("click",".maxui-close",function(a){a.preventDefault();
a=b(this.parentNode.parentNode);maxui.Na({type:a.b("type"),value:a.b("value")})});b("#maxui-new-participants").f("click",".maxui-close",function(a){a.preventDefault();a=b(this.parentNode.parentNode);maxui.Oa({g:a.b("username")})});b("#maxui-new-displayName").f("keyup","input",function(a){a.preventDefault();maxui.O()});b("#maxui-newactivity").f("click",".maxui-prediction",function(a){a.preventDefault();var c=b(this);a=b("#maxui-newactivity-box textarea");var d=b("#maxui-newactivity #maxui-predictive"),
e=a.d(),g=/^\s*@([\w\.]+)/;e.match(g);c=e.replace(g,"@"+c.text()+" ");d.j();a.d(c);a.focus()});b("#maxui-conversation-predictive").f("click",".maxui-prediction",function(a){a.preventDefault();var c=b(this);a=b("#maxui-add-people-box .maxui-text-input");var d=b("#maxui-conversations #maxui-predictive"),e=a.d(),g=/^\s*([\w\.]+)s*/;e.match(g);c=e.replace(g,c.text());maxui.na({username:c});d.j();a.d("").focus()});b("#maxui-show-conversations").f("click",function(a){a.preventDefault();window.status="";
maxui.U(function(){maxui.aa("conversations")})});b("#maxui-back-conversations").f("click",function(a){a.preventDefault();window.status="";maxui.U(function(){maxui.$("conversations")})});b("#maxui-show-timeline").f("click",function(a){a.preventDefault();window.status="";maxui.H({},function(){maxui.aa("timeline")})});b("#maxui-conversations").f("click",".maxui-conversation",function(a){a.preventDefault();window.status="";var c=b(a.target).t(".maxui-conversation").b("id");a=b(a.target).t(".maxui-conversation").b("data-displayname");
maxui.a.Q={hash:c,displayName:a};maxui.V(c,function(){maxui.$("messages")})});b("#maxui-activities").f("click",".maxui-delete-activity",function(a){a.preventDefault();a=b(this).t(".maxui-activity").find(".maxui-activity-message > .maxui-popover");a.Ua(":visible")?(a.l({opacity:0},300),b(".maxui-popover").n({opacity:0}).j()):(b(".maxui-popover").n({opacity:0}).j(),a.show(),a.l({opacity:1},300))});b("#maxui-activities").f("click",".maxui-activity-message .maxui-button.cancel",function(a){a.preventDefault();
b(this).t(".maxui-activity").find(".maxui-popover");$popover=b(".maxui-popover").n({opacity:0});$popover.j()});b("#maxui-activities").f("click",".maxui-activity-message .maxui-button.delete",function(a){console.log("delete activityid");a.preventDefault();var c=b(this).t(".maxui-activity");a=c.b("id");maxui.k.Xb(a,function(){var a=b(".maxui-popover").l({opacity:0},300);c.n({height:c.height(),"min-height":"auto"});c.l({height:0,opacity:0},100,function(){c.remove();a.j()})})});b("#maxui-activities").f("click",
".maxui-delete-comment",function(a){a.preventDefault();a=b(this).t(".maxui-comment").find(".maxui-popover");a.Ua(":visible")?(a.l({opacity:0},300),b(".maxui-popover").n({opacity:0}).j()):(b(".maxui-popover").n({opacity:0}).j(),a.show(),a.l({opacity:1},300))});b("#maxui-activities").f("click",".maxui-comment .maxui-button.cancel",function(a){a.preventDefault();b(this).t(".maxui-comment").find(".maxui-popover");$popover=b(".maxui-popover").n({opacity:0});$popover.j()});b("#maxui-activities").f("click",
".maxui-comment .maxui-button.delete",function(a){console.log("delete comment");a.preventDefault();var c=b(this).t(".maxui-comment"),d=c.t(".maxui-activity");a=d.b("id");var e=c.b("id");maxui.k.Yb(a,e,function(){var a=b(".maxui-popover").l({opacity:0},300);c.n({height:d.height(),"min-height":"auto"});c.l({height:0,opacity:0},100,function(){c.remove();a.j()})})});b("#maxui-add-people-box").f("focusin",".maxui-text-input",function(a){a.preventDefault();a=b(this).d();var c=b(this).b("data-literal");
normalized=maxui.i.u(a,!1);normalized==c&&b(this).d("")}).f("keydown",".maxui-text-input",function(a){0<b("#maxui-conversation-predictive:visible").length&&(40==a.which||38==a.which||13==a.which||9==a.which)&&maxui.i.Ra(a)}).f("keyup",".maxui-text-input",function(a){a.preventDefault();a.stopPropagation();var c=b(this).d();""==maxui.i.u(c,!1)?(b(this).b("class","maxui-empty maxui-text-input"),b(this).I("title")):maxui.a.F&&b(this).b("class","maxui-text-input");var d=a.which,e=c.match(/^\s*([\w\.]+)\s*/),
g=c.match(/^\s*([\w\.]+)\s*$/);a=b("#maxui-conversation-predictive .maxui-prediction.selected");var h=b(this),k=b("#maxui-conversation-predictive"),l=k.find(".maxui-prediction").length,m=0<b("#maxui-conversation-predictive:visible").length;40==d&&m&&1<l?(c=a.next(),a.ha("selected"),0<c.length?c.C("selected"):a.la(":first").C("selected")):38==d&&m&&1<l?(c=a.gb(),a.ha("selected"),0<c.length?c.C("selected"):a.la(":last").C("selected")):27==d?k.j():13!=d&&9!=d||!m?"conversations"==maxui.a.v&&(e?(h.b("class",
"maxui-text-input"),g&&(k.show(),k.r("<ul></ul>"),maxui.za(e[1],"#maxui-conversation-predictive"))):(k.j(),h.b("class","maxui-empty maxui-text-input"),c.match(/^\s*@/)||(h.b("class","maxui-text-input error"),h.b("title",maxui.a.e.Sb)))):(console.log("intro"),a=c.replace(/^\s*([\w\.]+\s*)/,a.text()),console.log(a),maxui.na({username:a}),k.j(),h.d("").focus())}).f("focusout",".maxui-text-input",function(a){a.preventDefault();a=b(this).d();var c=b(this).b("data-literal");normalized=maxui.i.u(a,!1);""==
normalized&&b(this).d(c)});maxui.da("#maxui-newactivity","#maxui-newactivity-box",{},function(a){if("timeline"==maxui.a.p)maxui.ib(),b("#maxui-search").J("folded",!0);else if("conversations"==maxui.a.p)if("conversations"==maxui.a.v){var c=$("#maxui-new-participants")[0];a=[];for(i=0;i<c.m.length;i++)a.push(c.m[i].g);var d=b("#maxui-newactivity textarea").d(),d={M:a,message:d};1<a.length&&(a=b("#maxui-add-people-box #maxui-new-displayName input").d(),d.G=a);maxui.Ma(d,function(){c.m=[];maxui.O()})}else maxui.sendMessage(a,
maxui.a.Q.hash)},function(a,c,d,e){var g=e.which,h=a.match(/^\s*@([\w\.]+)s*/),k=a.match(/^\s*@([\w\.]+)s*$/);e=b("#maxui-newactivity .maxui-prediction.selected");c=b(c);var l=b("#maxui-newactivity #maxui-predictive"),m=l.find(".maxui-prediction").length,n=0<b("#maxui-newactivity #maxui-predictive:visible").length;40==g&&n&&1<m?(a=e.next(),e.ha("selected"),0<a.length?a.C("selected"):e.la(":first").C("selected")):38==g&&n&&1<m?(a=e.gb(),e.ha("selected"),0<a.length?a.C("selected"):e.la(":last").C("selected")):
27==g?l.j():13!=g&&9!=g||!n?""==a?"timeline"==maxui.a.p&&b(d).d(maxui.a.e.ga):"timeline"==maxui.a.p?h?(b(d).d(maxui.a.e.ya),k&&(l.show(),l.r("<ul></ul>"),maxui.za(h[1],"#maxui-newactivity #maxui-predictive")),b(d).I("disabled"),b(d).b("class","maxui-button"),c.b("class","maxui-text-input")):(b(d).d(maxui.a.e.ga),l.j(),a.match(/^\s*@/)||maxui.a.F||(c.b("class","maxui-text-input error"),c.b("title",maxui.a.e.Tb))):"conversations"==maxui.a.p&&("conversations"==maxui.a.v?maxui.O():"messages"==maxui.a.v&&
(l.j(),b(d).I("disabled"),b(d).b("class","maxui-button"),c.b("class","maxui-text-input"))):(e=a.replace(/^\s*@([\w\.]+)/,"@"+e.text()+" "),l.j(),c.d(e).focus())});maxui.da("#maxui-activities",".maxui-newcommentbox",{},function(a){var c=b(this).t(".maxui-activity").b("id");maxui.k.rb(a,c,function(){b("#activityContainer textarea").d("");var a=this.object.Jb[0].id;maxui.hb(a);b("#"+a+" .maxui-newcommentbox textarea").d("");b("#"+a+" .maxui-newcommentbox .maxui-button").b("disabled","disabled")})});
maxui.da("#maxui-search","#maxui-search-box",{},function(a){console.log("behaviour");maxui.mb(a);b("#maxui-search").J("folded",!1);b("#maxui-search-text").d("")})};b.h.da=function(a,c,d,e){var g=this,h=c+" .maxui-text-input",k=4<arguments.length?arguments[4]:null;b(a).f("focusin",h,function(a){a.preventDefault();a=b(this).d();var c=b(this).b("data-literal");normalized=g.i.u(a,!1);normalized==c&&b(this).d("")}).f("keydown",h,function(c){if(0<b(a+" #maxui-predictive:visible").length&&(40==c.which||
38==c.which||13==c.which||9==c.which))g.i.Ra(c);else if(13==c.which&&!1==c.shiftKey&&!d.xa){c.preventDefault();var m=b(this).parent().find(".maxui-text-input");c=m.b("data-literal");var m=m.d(),h=g.i.u(m,!1);h!=c&""!=h&&e.apply(this,[m])}}).f("keyup",h,function(a){a.preventDefault();a.stopPropagation();var c=b(this).d(),e=b(this).parent().find(".maxui-button");""!=g.i.u(c,!1)||d.xa?g.a.F&&!d.xa&&(b(e).I("disabled"),b(e).b("class","maxui-button"),b(this).b("class","maxui-text-input")):(b(e).b("disabled",
"disabled"),b(e).b("class","maxui-button maxui-disabled"),b(this).b("class","maxui-empty maxui-text-input"),b(this).I("title"));null!=k&&k(c,this,e,a)}).f("focusout",h,function(a){a.preventDefault();a=b(this).d();var c=b(this).b("data-literal");normalized=g.i.u(a,!1);""==normalized&&b(this).d(c)}).f("click",c+" .maxui-button",function(a){a.preventDefault();var c=b(this).parent().find(".maxui-text-input");a=c.b("data-literal");var c=c.d(),h=g.i.u(c,!1);(h!=a&""!=h||d.Bb)&&e.apply(this,[c])})};b.h.mb=
function(a){maxui=this;normalized=maxui.i.u(a);a=normalized.split(" ");for(kw=0;kw<a.length;kw++){var b="keyword",d=a[kw];switch(d[0]){case "#":b="hashtag";d=d.substr(1);break;case "@":b="actor";d=d.substr(1);break;default:b="keyword"}3<=d.length&&this.ca({type:b,value:d},!1)}this.N()};b.h.N=function(){var a={filters:this.filters},c=this.s.filters.A(a);b("#maxui-search-filters").r(c);c={};for(f=0;f<a.filters.length;f++){var d=a.filters[f];c[d.type]||(c[d.type]=[]);c[d.type].push(d.value)}0<arguments.length&&
(c.before=arguments[0]);this.H(c);b("#maxui-search-toggle").J("maxui-disabled",0==this.filters.length);b("#maxui-search").J("folded",0==this.filters.length)};b.h.Na=function(a){maxui=this;var b=!1;for(i=0;i<maxui.filters.length;i++)maxui.filters[i].value==a.value&maxui.filters[i].type==a.type&&(b=!0,maxui.filters.splice(i,1));b&&this.N()};b.h.ca=function(a){maxui=this;var b=!0;1<arguments.length&&(b=arguments[1]);maxui.filters||(maxui.filters=[]);switch(a.type){case "hashtag":a.prepend="#";break;
case "actor":a.prepend="@";break;default:a.prepend=""}var d=!1;for(i=0;i<maxui.filters.length;i++)maxui.filters[i].value==a.value&maxui.filters[i].type==a.type&&(d=!0);d||(maxui.filters.push(a),!0==b&&this.N())};b.h.O=function(){$participants_box=b("#maxui-new-participants");participants_box=$participants_box[0];participants_box.m||(participants_box.m=[]);$button=b("#maxui-newactivity input.maxui-button");$newmessagebox=b("#maxui-newactivity");var a=$newmessagebox.find("textarea").d(),a=this.i.u(a);
$newdisplaynamebox=b("#maxui-add-people-box #maxui-new-displayName");var c=$newdisplaynamebox.find("input").d(),c=this.i.u(c),d=this.s.M.A({Pb:participants_box.m});b("#maxui-new-participants").r(d);b("#maxui-add-people-box .maxui-label .maxui-count").text("({0}/{1})".q(participants_box.m.length+1,this.a.Ya));0<participants_box.m.length?(console.log(participants_box.m.length),console.log("="+c+"="),console.log("="+a+"="),1!=participants_box.m.length&&""==c||""==a?($button.b("disabled","disabled"),
$button.b("class","maxui-button maxui-disabled"),""==c&&($newmessagebox.find("textarea").b("class","maxui-text-input error"),$newmessagebox.find("textarea").b("title",this.a.e.Qb))):($button.I("disabled"),$button.b("class","maxui-button"),$newmessagebox.find("textarea").b("class","maxui-text-input")),$participants_box.show(),$newmessagebox.show(),1<participants_box.m.length?$newdisplaynamebox.show():($newdisplaynamebox.j(),$newdisplaynamebox.find(".maxui-text-input").d(""))):($button.b("disabled",
"disabled"),$button.b("class","maxui-button maxui-disabled"),$participants_box.j(),$newmessagebox.find("textarea").b("class","maxui-text-input error"),$newmessagebox.find("textarea").b("title",this.a.e.Rb),$newdisplaynamebox.j(),$newdisplaynamebox.find(".maxui-text-input").d(""))};b.h.Oa=function(a){maxui=this;var b=!1;participants_box=$("#maxui-new-participants")[0];for(i=0;i<participants_box.m.length;i++)participants_box.m[i].g==a.g&&(b=!0,participants_box.m.splice(i,1));b&&this.O()};b.h.na=function(a){maxui=
this;participants_box=$("#maxui-new-participants")[0];var b=!0;1<arguments.length&&(b=arguments[1]);var d=!1;participants_box.m||(participants_box.m=[]);if(a.g!=maxui.a.g&&participants_box.m.length<maxui.a.Ya-1){for(i=0;i<participants_box.m.length;i++)participants_box.m[i].g==a.g&&(d=!0);d||(participants_box.m.push(a),!0==b&&this.O())}};b.h.$=function(a){maxui=this;var c=b("#maxui-conversations"),d=b("#maxui-conversations-list"),e=c.find(".maxui-wrapper"),g=b("#maxui-messages");b("#maxui-message-list");
var h=b("#maxui-newactivity-box textarea"),k=c.find("#maxui-common-header"),l=b("#maxui-add-people-box"),c=maxui.width(),c=c-maxui.c.width-2;"messages"==a&&a!=maxui.a.v&&(l.l({height:0,"padding-top":0,"padding-bottom":0},400,function(){l.n({"border-color":"transparent"})}),k.find("h3").text(maxui.a.Q.G),d.l({"margin-left":-1*c},400),g.l({left:0},400,function(){e.height(244);k.l({height:45},100,function(){maxui.c.ja(244);maxui.c.ka("#maxui-conversations #maxui-messages");maxui.c.Z(100)})}),g.width(c),
maxui.a.v="messages",c=maxui.a.e.$a,h.d(c).b("data-literal",c));"conversations"==a&&a!=maxui.a.v&&(k.l({height:0},100,function(){l.n({"border-color":"#ccc"});maxui.c.ja(289);maxui.c.ka("#maxui-conversations #maxui-conversations-list");maxui.c.Z(0);l.l({height:19,"padding-top":6,"padding-bottom":6},400,function(){l.I("style")})}),e.height(289),c=d.width()+11,d.l({"margin-left":0},400),g.l({left:c},400),maxui.a.v="conversations",c=maxui.a.e.ab,h.d(c).b("data-literal",c))};b.h.aa=function(a){maxui=this;
var c=b("#maxui-search"),d=b("#maxui-timeline"),e=b("#maxui-timeline .maxui-wrapper"),g=b("#maxui-conversations"),h=g.find("#maxui-common-header");g.find("#maxui-back-conversations");var k=g.find("input#add-user-input"),l=b("#maxui-conversations #maxui-conversations-list"),m=b("#maxui-conversations .maxui-wrapper"),n=b("#maxui-newactivity-box .maxui-button"),q=b("#maxui-show-conversations"),s=b("#maxui-show-timeline"),t=b("#maxui-add-people-box"),u=maxui.width()-maxui.c.width-20-2,p=320;"conversations"==
a&&"conversations"==maxui.a.zb&&(p=320,g.show(),t.show(),h.l({height:0},400),k.focus(),g.l({height:p-31},400,function(){m.height(p-31)}),l.width(u),d.l({height:0},400),c.j(400),maxui.a.p="conversations",n.d(maxui.a.e.ya),q.j(),maxui.a.Ab||s.show(),maxui.c.ja(p-31),maxui.c.ka("#maxui-conversations #maxui-conversations-list"));"timeline"==a&&(d.show(),a=e.height(),d.l({height:a},400,function(){d.n("height","")}),g.l({height:0},400,function(){g.j();t.j()}),c.show(400),maxui.a.p="timeline",n.d(maxui.a.e.ga),
maxui.a.sa||q.show(),s.j())};b.h.nb=function(){maxui=this;return maxui.a};b.h.Ma=function(a,c){maxui=this;var d=[];a.M.push(maxui.a.g);d.push(a);"conversations"==maxui.a.p?d.push(function(){c();var b=this.pa[0].id;maxui.a.Q={hash:b};maxui.a.Q.G=a.G?a.G:a.M[0];maxui.V(b,function(){maxui.$("messages");id=maxui.wb.cc("/exchange/{0}".q(b),function(a){maxui.Ta(a)})})}):d.push(function(){b("#maxui-newactivity textarea").d("");b("#maxui-newactivity .maxui-button").b("disabled","disabled");maxui.U(function(){maxui.aa("conversations")})});
maxui.k.tb.apply(maxui.k,d)};b.h.sendMessage=function(a,c){maxui=this;var d=[];d.push(a);d.push(c);d.push(function(){b("#maxui-newactivity textarea").d("");b("#maxui-newactivity .maxui-button").b("disabled","disabled");maxui.V(c,function(){maxui.$("messages")})});maxui.k.sb.apply(maxui.k,d)};b.h.ib=function(){maxui=this;var a=b("#maxui-newactivity textarea").d(),c=[];c.push(a);c.push(maxui.a.P);c.push(function(){b("#maxui-newactivity textarea").d("");b("#maxui-newactivity .maxui-button").b("disabled",
"disabled");var a=b(".maxui-activity:first");0<a.length?(filter={Ea:a.b("id")},maxui.H(filter)):maxui.H({})});maxui.a.va&&c.push(maxui.a.va);maxui.k.qb.apply(maxui.k,c)};b.h.Wa=function(){maxui=this;filter={Ha:b(".maxui-activity:last").b("id")};maxui.H(filter)};b.h.za=function(a,b){var d=this,e=[];e.push(a);e.push(function(){d.Qa(this,b)});this.k.Ib.apply(this.k,e)};b.h.Qa=function(a,c){var d="";for(i=0;i<a.length;i++){var e=a[i];if(e.g!=this.g)var g=this.a.w.q(e.g),d=d+this.s.Ub.A({g:e.g,K:g,yb:"maxui-prediction"+
(0==i&&" selected"||"")})}b(c+" ul").r(d);if(2<arguments.length)(0,arguments[2])()};b.h.U=function(){var a=this,c="conversations"==a.a.p,c=!1==a.a.sa&&!c,c={Ga:a.a.w.q(a.a.g),Fa:!0,Ia:a.a.e.ya,lb:a.a.e.ab,e:a.a.e,kb:c?"display:block;":"display:none;"},c=a.s.eb.A(c);b("#maxui-newactivity").r(c);c=[];c.push(a.a.g);if(0<arguments.length){var d=arguments[0];c.push(function(){a.ta(this,d)})}else c.push(function(){a.ta(this)});this.k.Fb.apply(this.k,c)};b.h.ta=function(a){var c="";for(i=0;i<a.length;i++){var d=
a[i],e=d.M.slice();this.i.Zb(e,this.a.g);if(2>=d.M.length)var e=e[0],g=this.a.w.q(e),h=e;else e=e[0],g=this.a.La.q(d.id),h=d.G;d={id:d.id,Ob:e,G:h,text:this.i.T(d.Va.content),Za:d.Za,e:this.a.e,R:this.i.S(d.Va.W,this.language),K:g};c+=this.s.qa.A(d)}0<a.length&&b("#maxui-conversations-list").r(c);if(1<arguments.length)(0,arguments[1])()};b.h.V=function(a){var b=this,d=[];d.push(a);if(1<arguments.length){var e=arguments[1];d.push(function(){b.ua(this,e)})}else d.push(function(){b.ua(this)});this.k.Gb.apply(this.k,
d)};b.h.ua=function(a){var c="";for(i=0;i<a.length;i++){var d=a[i],e=this.a.w.q(d.o.g);origin="maxui-user-notme";d.o.g==this.a.g&&(origin="maxui-user-me");d={id:d.id,text:this.i.T(d.object.content),R:this.i.S(d.W,this.language),origin:origin,e:this.a.e,K:e};c+=this.s.message.A(d)}b("#maxui-messages #maxui-message-list").r(c);if(1<arguments.length)(0,arguments[1])()};b.h.fa=function(a,c){var d="";for(i=0;i<a.length;i++){var e=a[i],g=void 0;e.hasOwnProperty("contexts")&&0<e.pa.length&&(g=e.pa[0]);var h=
void 0;e.hasOwnProperty("generator")&&e.Sa!=this.a.va&&(h=e.Sa);var k="";"person"==e.o.bb?k=this.a.w.q(e.o.g):"context"==e.o.bb&&(k=this.a.Ka.q(e.o.hash));var l=[];if(e.Y&&0<e.Y.length)for(r=0;r<e.Y.length;r++){var m=e.Y[r];reply={id:m.id,o:m.o,R:this.i.S(m.W,this.language),text:this.i.T(m.content),K:this.a.w.q(m.o.g),Ja:m.ra,e:this.a.e};l.push(reply)}e={id:e.id,o:e.o,e:this.a.e,R:this.i.S(e.W,this.language),text:this.i.T(e.object.content),Y:l,K:k,Vb:g,vb:e.ra,fc:h};d+=this.s.ob.A(e,{oa:this.s.oa})}if("beggining"==
c){b("#maxui-preload .maxui-wrapper").fb(d);g=b("#maxui-preload .maxui-wrapper .maxui-activity");for(i=e=0;i<g.length;i++)e+=b(g[i]).height()+18;g=b("#maxui-preload").height();b("#maxui-preload").height(e-g);b("#maxui-preload").n({"margin-top":-1*(e-g)});b("#maxui-preload").l({"margin-top":0},200,function(){b("#maxui-preload .maxui-wrapper").r("");b("#maxui-activities").fb(d);b("#maxui-preload").height(0)})}else"end"==c?b("#maxui-activities").append(d):b("#maxui-activities").r(d);2<arguments.length&&
arguments[2].call()};b.h.Pa=function(a,c){maxui=this;var d="";for(i=0;i<a.length;i++)var e=a[i],e={e:maxui.a.e,id:e.id,o:e.o,R:maxui.i.S(e.W,maxui.language),text:maxui.i.T(e.content),K:maxui.a.w.q(e.o.g),Ja:e.ra},d=d+maxui.s.oa.A(e);b(".maxui-activity#"+c+" .maxui-commentsbox").r(d);comment_count=b(".maxui-activity#"+c+" .maxui-commentaction strong");b(comment_count).text(eval(b(comment_count).text())+1)};b.h.Ba=function(){var a="conversations"==this.a.p,a=!1==this.a.sa&&!a,a={Ga:this.a.w.q(this.a.g),
Fa:this.a.F,Ia:this.a.e.ga,lb:this.a.e.$a,e:this.a.e,kb:a?"display:block;":"display:none;"},a=this.s.eb.A(a);b("#maxui-newactivity").r(a)};b.h.H=function(a){var b=this,d=[],e="replace";a.Ha&&(e="end");a.Ea&&(e="beggining");a.ac=b.a.pb;if("timeline"==b.a.ba){var g=this.k.Hb;d.push(b.a.g)}else"activities"==b.a.ba&&(g=this.k.Db,d.push(b.a.g),d.push(b.a.Aa));if(1<arguments.length){var h=arguments[1];d.push(function(){var a=this;b.a.F=!0;"activities"==b.a.ba?b.k.getContext(b.a.Aa,function(){var d=b.a.dc;
d[this.hash]||(d[this.hash]={},d[this.hash].permissions={},d[this.hash].permissions.read="public"==this.cb.Wb,d[this.hash].permissions.write="public"==this.cb.write);for(wc=0;wc<b.a.P.length;wc++){var g=b.a.Ca[wc];d[g].permissions?!0!=d[g].permissions.write&&(b.a.F=!1):b.a.F=!1}b.Ba();b.fa(a,e,h)}):(b.Ba(),b.fa(a,e,h))})}else d.push(function(){b.fa(this,e)});d.push(a);g.apply(this.k,d)};b.h.hb=function(a){var b=this,d=[];d.push(a);d.push(function(){b.Pa(this,a)});this.k.Eb.apply(this.k,d)}})(jQuery);
/*
* max.loader.js
*/
window.setTimeout(function () {
    if(window._MAXUI.onReady && !window._MAXUI.hasRun){
        window._MAXUI.hasRun = true;
        _MAXUI.onReady();
    }
  },0)
